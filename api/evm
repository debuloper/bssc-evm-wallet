// /pages/api/evm.ts
export default async function handler(req, res) {
  // バッチ(array)で来たら1件ずつ順番に投げる
  const body = Array.isArray(req.body) ? req.body : [req.body];
  const results = [];
  for (const item of body) {
    const r = await fetch("https://bssc-rpc.bssc.live", {
      method: "POST",
      headers: { "content-type": "application/json" },
      body: JSON.stringify(item),
      cache: "no-store",
    });
    results.push(await r.json());
  }
  res.setHeader("content-type", "application/json");
  res.status(200).send(Array.isArray(req.body) ? results : results[0]);
}
